(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aed43"],{"0c71":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"ui container padding"},[e("h1",{staticClass:"ui dividing header"},[t._v(" "+t._s(t.$t("problem"))+" "),e("router-link",{attrs:{to:"/problem/submit/"+t.pid}},[t._v(t._s(t.pid))]),t._v(" "+t._s(t.$t("status"))+" ")],1),e("div",{staticClass:"ui stacked segment"},[e("div",{staticClass:"ui statistics"},[e("div",{staticClass:"black statistic"},[e("div",{staticClass:"value"},[t._v(" "+t._s(t.submitStatus.total_status.total_submit)+" ")]),e("div",{staticClass:"label"},[t._v(" 总提交 ")])]),e("div",{staticClass:"black statistic"},[e("div",{staticClass:"value"},[t._v(" "+t._s(t.submitStatus.total_status.total_solved_submit)+" ")]),e("div",{staticClass:"label"},[t._v(" 已提交用户 ")])]),e("div",{staticClass:"black statistic"},[e("div",{staticClass:"value"},[t._v(" "+t._s(t.submitStatus.total_status.total_solved_user)+" ")]),e("div",{staticClass:"label"},[t._v(" 已通过用户 ")])]),t._l(t.submitStatus.problem_status,(function(a,s){return e("div",{key:a,class:t.submitStatus.color[s-1]+" statistic"},[e("div",{staticClass:"value"},[t._v(" "+t._s(a)+" ")]),e("div",{staticClass:"label"},[e("router-link",{attrs:{to:"/status?problem_id="+t.pid+"&jresult="+s}},[t._v(" "+t._s(t.submitStatus.statistic_name[s])+" ")])],1)])}))],2)]),t._m(0),t._m(1),t._m(2),t._m(3),e("div",{staticClass:"ui piled segment"},[e("h2",{staticClass:"ui dividing header"},[t._v("做题人员流向")]),e("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:t.initSolveMap,expression:"initSolveMap"}],staticClass:"amcharts",attrs:{id:"chord_graph"}},[t._v("加载中")])]),t._m(4),e("h1",{staticClass:"ui dividing header"},[t._v("Submissions")]),e("table",{staticClass:"ui table",attrs:{id:"problemstatus"}},[t._m(5),e("tbody",t._l(t.submitStatus.solution_status,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(20*t.current_page+s+1))]),e("td",[t._v(t._s(a.solution_id))]),e("td",[e("router-link",{attrs:{to:"/user/"+a.user_id}},[t._v(" "+t._s(a.user_id)+" ")])],1),e("td",[t._v(t._s(a.memory)+"KB")]),e("td",[t._v(t._s(a.time)+"ms")]),e("td",[t.isadmin||a.user_id==t.owner?e("router-link",{attrs:{to:"/usercode/local/"+a.solution_id}},[t._v(" "+t._s(t.submitStatus.language_name[a.language])+" ")]):e("span",[t._v(t._s(t.submitStatus.language_name[a.language]))])],1),e("td",[t._v(t._s(a.code_length)+"B")]),e("td",[t._v(t._s(new Date(a.in_date).toLocaleString()))])])})),0)]),e("br"),e("router-link",{staticClass:"ui button",attrs:{to:"/status?problem_id="+this.pid}},[t._v(" Status ")]),e("a",{class:"ui button "+(0==t.current_page?"disabled":""),on:{click:function(a){0!=t.current_page&&t.page(-t.current_page,a)}}},[t._v("Top")]),e("div",{staticClass:"ui buttons"},[e("button",{class:"ui left labeled icon button "+(0==t.current_page?"disabled":""),on:{click:function(a){0!=t.current_page&&t.page(-1,a)}}},[e("i",{staticClass:"left arrow icon"}),t._v(" Prev ")]),e("div",{staticClass:"or"}),e("button",{class:"ui right labeled icon button "+(t.submit_stat.length<20?"disabled":""),on:{click:function(a){20==t.submit_stat.length&&t.page(1,a)}}},[e("i",{staticClass:"right arrow icon"}),t._v(" Next ")])])],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"ui piled segment"},[e("div",{attrs:{align:"center",id:"pie_chart_language_legend"}}),e("div",{staticStyle:{width:"100%"},attrs:{align:"center",id:"canvas-holder"}},[e("canvas",{attrs:{id:"chart-area"}})])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"ui piled segment"},[e("div",{attrs:{align:"center",id:"bar_chart_language_legend"}}),e("div",{staticStyle:{width:"100%"},attrs:{align:"center",id:"bar-holder"}},[e("canvas",{attrs:{id:"bar-area"}})])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"ui piled segment"},[e("div",{attrs:{align:"center",id:"memory_bar_chart_language_legend"}}),e("div",{staticStyle:{width:"100%"},attrs:{align:"center",id:"memory_bar_holder"}},[e("canvas",{attrs:{id:"memory_bar_area"}})])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"ui piled segment"},[e("h2",{staticClass:"ui dividing header"},[t._v("代码长度")]),e("div",{staticClass:"amcharts",attrs:{id:"problem_code_length"}})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"ui grid"},[e("div",{staticClass:"eight wide column"}),e("div",{staticClass:"seven wide column"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",{staticClass:"toprow"},[e("th",{staticStyle:{cursor:"hand"}},[t._v("名次 ")]),e("th",[t._v("RunID")]),e("th",[t._v("用户")]),e("th",[t._v("内存")]),e("th",[t._v("耗时")]),e("th",[t._v("语言")]),e("th",[t._v("代码长度")]),e("th",[t._v("提交时间")])])])}],n=(e("ddb0"),e("9ab4")),r=e("71c9"),l=e("c497"),o=e("2cd4"),u=e("60a3"),c=e("2ef0"),d=e.n(c),p=e("1157"),m=e.n(p),_=e("30ef"),h=e.n(_);const g=e("5a54").default,b=m.a,v={},f={};function y(t,a="default"){const e=[];if(v[a])return;v[a]=!0,d.a.forEach(t,(function(t){e.push({date:new Date(t.in_date),value:t.code_length})})),r["e"](g);const s=r["d"]("problem_code_length",l["j"]);s.data=e;const i=s.xAxes.push(new l["e"]);i.renderer.minGridDistance=60,s.yAxes.push(new l["i"]);const n=s.series.push(new l["g"]);n.dataFields.valueY="value",n.dataFields.dateX="date",n.tooltipText="{value}",n.tooltip.background.cornerRadius=20,n.tooltip.background.strokeOpacity=0,n.tooltip.pointerOrientation="vertical",n.tooltip.label.minWidth=40,n.tooltip.label.minHeight=40,n.tooltip.label.textAlign="middle",n.tooltip.label.textValign="middle",n.tooltip.pointerOrientation="vertical";const o=n.bullets.push(new l["c"]);o.circle.strokeWidth=2,o.circle.radius=4,o.circle.fill=r["c"]("#fff");const u=o.states.create("hover");u.properties.scale=1.3,s.cursor=new l["l"],s.cursor.behavior="panXY",s.cursor.xAxis=i,s.cursor.snapToSeries=n,s.scrollbarY=new r["b"],s.scrollbarY.parent=s.leftAxesContainer,s.scrollbarY.toBack(),s.scrollbarX=new l["k"],s.scrollbarX.series.push(n),s.scrollbarX.parent=s.bottomAxesContainer}function C(t,a,e="chord_graph"){if(f[e])return;f[e]=!0,r["e"](g);const s=r["d"]("chord_graph",l["b"]);d.a.forEach(t,(function(t){if(t.from!=a){const a=t.from;t.from=t.to,t.to=a}t.from="本题",t.to+=""})),t.sort((function(t,a){return a.value-t.value}));while(t.length>30)t.pop();s.data=t,s.dataFields.fromName="from",s.dataFields.toName="to",s.dataFields.value="value";const i=s.nodes.template;i.readerTitle="点击块可显示或隐藏",i.showSystemTooltip=!0;const n=s.links.template,o=n.bullets.push(new l["c"]);function u(t){const a=3e3*Math.random()+2e3,e=t.animate([{property:"locationX",from:0,to:1}],a);e.events.on("animationended",(function(t){u(t.target.object)}))}o.fillOpacity=1,o.circle.radius=5,o.locationX=.5,s.events.on("ready",(function(){for(let t=0;t<s.links.length;t++){const a=s.links.getIndex(t),e=a.bullets.getIndex(0);u(e)}}))}let w=class extends(Object(u["b"])(o["a"])){constructor(){super(...arguments),this.problem_stat=[],this.submit_stat=[],this.problem_submit_stat={},this.stat_name=[],this.current_page=0,this.language_name=[],this.isadmin=!1,this.self="",this.time_range={},this.owner="",this.memory_range={},this.initedSolveMap=!1}created(){this.pid=this.$route.params.id,this.current_page=parseInt(this.$route.query.page||0)}get submitStatus(){const t={};return d.a.forEach(this.problem_stat,(function(a){t[a.result]=a.total})),{problem_status:t,solution_status:this.submit_stat,total_status:this.problem_submit_stat,color:["black","black","black","green","red","red","yellow","yellow","yellow","yellow","yellow","yellow","yellow","","",""],statistic_name:this.stat_name,language_name:this.language_name,time_range:this.time_range,memory_range:this.memory_range}}set submitStatus(t){const a=t.data.problem_status;this.problem_stat=a,this.submit_stat=t.data.solution_status,this.problem_submit_stat=t.data.submit_status,this.stat_name=t.data.statistic_name,this.language_name=t.data.language_name,this.isadmin=t.data.isadmin,this.owner=t.data.self,this.time_range=t.data.time_range,this.memory_range=t.data.memory_range}initSolveMap(){this.initedSolveMap||(this.initedSolveMap=!0,this.axios.get("/api/status/problem/solve_map/"+this.pid).then(({data:t})=>{"OK"===t.status&&d.a.delay(C,0,t.data,this.pid)}))}page(t){this.current_page+=t;this.axios.get(`/api/problemstatus/${this.pid}?page=${this.current_page}`).then(({data:t})=>{this.submitStatus=t,this.setQuery()})}setQuery(){const t={};0!==this.current_page?t.page=this.current_page+1:delete t.page,this.$router.push({path:this.$route.path,query:t})}mounted(){document.title=`Problem ${this.pid} Statistics -- ${document.title}`;const t=b("title").text();b("title").text("Status:Problem "+this.pid+" - "+t),this.current_page=Math.max(0,this.current_page-1),this.axios.get("/api/status/problem/code_length/problem/"+this.pid).then(({data:t})=>{y(t.data)}),this.axios.get(`/api/problemstatus/${this.pid}?page=${this.current_page}`).then(({data:t})=>{this.submitStatus=t,this.initGraph()})}initGraph(){const t=d.a.values(window.chartColors);t.push("#af63f4"),t.push("#00b5ad"),t.push("#350ae8"),t.push("#E2EAE9");const a=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"];d.a.forEach(a,(function(a){t.push(a)}));const e={type:"pie",data:{datasets:[{data:d.a.map(this.submitStatus.problem_status,t=>t),backgroundColor:t,label:"Status"}],labels:d.a.map(this.submitStatus.problem_status,(t,a)=>this.submitStatus.statistic_name[a])},options:{responsive:!0}},s={};let i={};d.a.forEach(this.submitStatus.time_range,(function(t){i[t.diff]=!0,s[t.language]={}})),i=d.a.map(i,(function(t,a){const e=a.split("-");let s=e[0]+"ms";return e.length>1&&(s+=" - "+e[1]+"ms"),s})),i.sort((function(t,a){if(-1!==t.indexOf(">")){const e=parseFloat(t.substring(1,t.length)),s=parseFloat(a.split("-")[0]);return e-s}if(-1!==a.indexOf(">")){const e=parseFloat(t.split("-")[0]),s=parseFloat(a.substring(1,a.length));return e-s}{const e=parseFloat(t.split("-")[0]),s=parseFloat(a.split("-")[0]);return e-s}})),d.a.forEach(s,(function(t,a){d.a.forEach(i,(function(t){s[a][t]=0}))})),d.a.forEach(this.submitStatus.time_range,t=>{const a=t.diff.split("-");let e=a[0]+"ms";a.length>1&&(e+=" - "+a[1]+"ms"),s[t.language][e]=t.total});let n=d.a.map(t,(function(t){return t}));const r={type:"bar",labels:i,datasets:d.a.map(s,(t,a)=>({label:this.submitStatus.language_name[a],backgroundColor:n.shift(),data:d.a.values(t)}))};let l={};const o={};n=d.a.map(t,t=>t),d.a.forEach(this.submitStatus.memory_range,t=>{l[t.diff]=!0,o[t.language]={}}),l=d.a.map(l,(t,a)=>{if(-1!==a.indexOf("-")){const t=a.split("-");t[0]=(parseFloat(t[0])/1024).toFixed(2),t.length>1&&(t[1]=(parseFloat(t[1])/1024).toFixed(2));let e=t[0]+"MB";return t.length>1&&(e+=" - "+t[1]+"MB"),e}{let t=a.substring(1,a.length);return t=(parseFloat(t)/1024).toFixed(2),">"+t+"MB"}}),l.sort((t,a)=>{if(">"===t.charAt(0)){const e=parseFloat(t.substring(1,t.length)),s=parseFloat(a.split("-")[0]);return e-s}if(">"===a.charAt(0)){const e=parseFloat(t.split("-")[0]),s=parseFloat(a.substring(1,a.length));return e-s}{const e=parseFloat(t.split("-")[0]),s=parseFloat(a.split("-")[0]);return e-s}}),d.a.forEach(o,(t,a)=>{d.a.forEach(l,t=>{o[a][t]=0})}),d.a.forEach(this.submitStatus.memory_range,t=>{if(-1!==t.diff.indexOf("-")){const a=t.diff.split("-");a[0]=(parseFloat(a[0])/1024).toFixed(2),a.length>1&&(a[1]=(parseFloat(a[1])/1024).toFixed(2));let e=a[0]+"MB";a.length>1&&(e+=" - "+a[1]+"MB"),o[t.language][e]=t.total}else{let a=t.diff.substring(1,t.diff.length);a=(parseFloat(a)/1024).toFixed(2),o[t.language][">"+a+"MB"]=t.total}});const u={type:"bar",labels:l,datasets:d.a.map(o,(t,a)=>({label:this.submitStatus.language_name[a],backgroundColor:n.shift(),data:d.a.values(t)}))},c=document.getElementById("chart-area").getContext("2d");window.myPie=new h.a(c,e);const p=document.getElementById("bar-area").getContext("2d"),m=document.getElementById("memory_bar_area").getContext("2d");window.myBar=new h.a(p,{type:"bar",data:r,options:{title:{display:!0,text:"AC代码运行用时"},tooltips:{mode:"index",intersect:!0},responsive:!0,scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0}]}}}),window.myMemory=new h.a(m,{type:"bar",data:u,options:{title:{display:!0,text:"AC代码内存使用"},tooltips:{mode:"index",intersect:!1},responsive:!0,scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0}]}}})}};w=Object(n["a"])([u["a"]],w);var x=w,S=x,k=e("2877"),F=Object(k["a"])(S,s,i,!1,null,"03d7ed16",null);a["default"]=F.exports}}]);