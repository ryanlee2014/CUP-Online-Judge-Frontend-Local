(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ee73574"],{"00d8":function(t,e){(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],r=0;r<t.length;r+=3)for(var s=t[r]<<16|t[r+1]<<8|t[r+2],o=0;o<4;o++)8*r+6*o<=8*t.length?n.push(e.charAt(s>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,s=0;r<t.length;s=++r%4)0!=s&&n.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*s+8)-1)<<2*s|e.indexOf(t.charAt(r))>>>6-2*s);return n}};t.exports=n})()},"044b":function(t,e){function n(t){return!!t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function r(t){return"function"===typeof t.readFloatLE&&"function"===typeof t.slice&&n(t.slice(0,0))}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(n(t)||r(t)||!!t._isBuffer)}},"0b52":function(t,e,n){},"111f":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-cn":{"context":"根据管理员设置，该页面禁止进入"},"en":{"context":"According to admin setup, you don\'t have privilege to access target page"},"ja":{"context":"都合によって、このページはアクセス禁止されている"}}'),delete t.options._Ctor}},"5dbd":function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"d",(function(){return h})),n.d(e,"b",(function(){return f})),n.d(e,"h",(function(){return b})),n.d(e,"e",(function(){return v})),n.d(e,"c",(function(){return g})),n.d(e,"g",(function(){return _})),n.d(e,"f",(function(){return y}));var r=n("2ef0"),s=n.n(r),o=n("6821"),i=n.n(o);n("ddb0");const a=(...t)=>{},c=a;function l(t){return function(...e){c(t,...e)}}var u=n("beea"),d=n("ec1c");const p=l("Decorator mounted: ");function m(t,e){return function(n,r,o){p(`debounce, target:${n.constructor.name}, propertyName:${r}`);const i=o.value;return o.value=s.a.debounce(i,t,e),o}}function h(t=0){return function(e,n,r){p(`Interval, target:${e.constructor.name}, propertyName:${n}`);const s=r.value;r.value=function(...r){if("undefined"===typeof this.timer_||"undefined"===typeof this.timer_.length)throw new Error("You should mixin TimerMixin to your component");s.apply(this,r),this.timer_.push(setInterval(()=>{p(`${e.constructor.name}.${n} called.`),s.apply(this,r)},t))},c("mounted interval")}}function f(t,e,n){p(`Debuglogging, target:${t.constructor.name}, propertyName:${e}`);const r=n.value;n.value=function(...t){const n=t.map(t=>JSON.stringify(t)).join(),s=r.apply(this,t),o=JSON.stringify(s);return c(`Call: ${e}(${n}) => ${o}`),s}}function b(t,e,n){p(`WebSocketRequest, target:${t.constructor.name}, propertyName:${e}`);const r=n.value;n.value=function(...t){if(this.$socket.connected)return r.apply(this,t);alert("WebSocket服务未启动，请等待服务启动后提交\nWebSocket服务启动标志未:\n右上角显示在线人数")}}function v(t){return function(e,n,r){p(`Lock, target:${e.constructor.name}, propertyName:${n}`);const s=r.value;r.value=async function(...e){await t.acquireAsync();const n=s.apply(this,e);return t.release(),n}}}function g(t,e,n){p(`ErrorAlert, target:${t.constructor.name}, propertyName:${e}`);const r=n.value;n.value=function(...t){try{return r.apply(this,t)}catch(e){alert(e.message)}}}function _(t,e,n){p(`RunOnceEachKey, target:${t.constructor.name}, propertyName:${e}`);const r=n.value,s={};n.value=function(...t){const e=i()(Object(u["b"])(t));if(!s[e])return s[e]=!0,r.apply(this,t)}}function y(t,e,n){p(`MarkdownDebug, target:${t.constructor.name}, propertyName:${e}`);const r=n.value;window.markdownIt=d["a"],n.value=async function(t){return r.call(this,t)}}},"626a":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:t.visibilityChanged,expression:"visibilityChanged"}],ref:"progressBarElement",class:t.progressBarClass,on:{mouseenter:t.trigger}},[n("div",{staticClass:"bar"})])},s=[],o=(n("ddb0"),n("9ab4")),i=n("6da9"),a=n("1b40"),c=n("1157"),l=n.n(c);const u=l.a;let d=class extends(Object(a["b"])(i["a"])){constructor(){super(...arguments),this.prevPercentage=0,this.element=null}visibilityChanged(t,e){t&&this.active?this.element.progress("set active"):this.element.progress("remove active")}updated(){this.mountFunc()}mounted(){this.mountFunc()}mountFunc(){null===this.element&&(this.element=u(this.$refs.progressBarElement)),this.prevPercentage!==this.percentage&&(this.element.progress({percent:this.percentage,autoSuccess:!1}),this.prevPercentage=this.percentage)}get progressBarClass(){const t=["ui","progress"];return this.size.length>0&&t.push(this.size),this.color.length>0&&t.push(this.color),this.active&&t.push("active"),t}trigger(){this.popupEvent(this.$refs.progressBarElement)}forceUpdate(){this.prevPercentage!==this.percentage&&this.$nextTick(this.$forceUpdate)}onSizeChange(){this.forceUpdate()}onColorChange(){this.forceUpdate()}onActiveChange(){this.forceUpdate()}onPercentageChange(){this.forceUpdate()}};Object(o["a"])([Object(a["c"])({default:""})],d.prototype,"size",void 0),Object(o["a"])([Object(a["c"])({default:""})],d.prototype,"color",void 0),Object(o["a"])([Object(a["c"])({default:!1})],d.prototype,"active",void 0),Object(o["a"])([Object(a["c"])({default:0})],d.prototype,"percentage",void 0),Object(o["a"])([Object(a["c"])({default:t=>{}})],d.prototype,"popupEvent",void 0),Object(o["a"])([Object(a["d"])("size")],d.prototype,"onSizeChange",null),Object(o["a"])([Object(a["d"])("color")],d.prototype,"onColorChange",null),Object(o["a"])([Object(a["d"])("active")],d.prototype,"onActiveChange",null),Object(o["a"])([Object(a["d"])("percentage")],d.prototype,"onPercentageChange",null),d=Object(o["a"])([a["a"]],d);var p=d,m=p,h=(n("ee78"),n("2877")),f=Object(h["a"])(m,r,s,!1,null,"75baf2bd",null);e["a"]=f.exports},6821:function(t,e,n){(function(){var e=n("00d8"),r=n("9a63").utf8,s=n("044b"),o=n("9a63").bin,i=function(t,n){t.constructor==String?t=n&&"binary"===n.encoding?o.stringToBytes(t):r.stringToBytes(t):s(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var a=e.bytesToWords(t),c=8*t.length,l=1732584193,u=-271733879,d=-1732584194,p=271733878,m=0;m<a.length;m++)a[m]=16711935&(a[m]<<8|a[m]>>>24)|4278255360&(a[m]<<24|a[m]>>>8);a[c>>>5]|=128<<c%32,a[14+(c+64>>>9<<4)]=c;var h=i._ff,f=i._gg,b=i._hh,v=i._ii;for(m=0;m<a.length;m+=16){var g=l,_=u,y=d,w=p;l=h(l,u,d,p,a[m+0],7,-680876936),p=h(p,l,u,d,a[m+1],12,-389564586),d=h(d,p,l,u,a[m+2],17,606105819),u=h(u,d,p,l,a[m+3],22,-1044525330),l=h(l,u,d,p,a[m+4],7,-176418897),p=h(p,l,u,d,a[m+5],12,1200080426),d=h(d,p,l,u,a[m+6],17,-1473231341),u=h(u,d,p,l,a[m+7],22,-45705983),l=h(l,u,d,p,a[m+8],7,1770035416),p=h(p,l,u,d,a[m+9],12,-1958414417),d=h(d,p,l,u,a[m+10],17,-42063),u=h(u,d,p,l,a[m+11],22,-1990404162),l=h(l,u,d,p,a[m+12],7,1804603682),p=h(p,l,u,d,a[m+13],12,-40341101),d=h(d,p,l,u,a[m+14],17,-1502002290),u=h(u,d,p,l,a[m+15],22,1236535329),l=f(l,u,d,p,a[m+1],5,-165796510),p=f(p,l,u,d,a[m+6],9,-1069501632),d=f(d,p,l,u,a[m+11],14,643717713),u=f(u,d,p,l,a[m+0],20,-373897302),l=f(l,u,d,p,a[m+5],5,-701558691),p=f(p,l,u,d,a[m+10],9,38016083),d=f(d,p,l,u,a[m+15],14,-660478335),u=f(u,d,p,l,a[m+4],20,-405537848),l=f(l,u,d,p,a[m+9],5,568446438),p=f(p,l,u,d,a[m+14],9,-1019803690),d=f(d,p,l,u,a[m+3],14,-187363961),u=f(u,d,p,l,a[m+8],20,1163531501),l=f(l,u,d,p,a[m+13],5,-1444681467),p=f(p,l,u,d,a[m+2],9,-51403784),d=f(d,p,l,u,a[m+7],14,1735328473),u=f(u,d,p,l,a[m+12],20,-1926607734),l=b(l,u,d,p,a[m+5],4,-378558),p=b(p,l,u,d,a[m+8],11,-2022574463),d=b(d,p,l,u,a[m+11],16,1839030562),u=b(u,d,p,l,a[m+14],23,-35309556),l=b(l,u,d,p,a[m+1],4,-1530992060),p=b(p,l,u,d,a[m+4],11,1272893353),d=b(d,p,l,u,a[m+7],16,-155497632),u=b(u,d,p,l,a[m+10],23,-1094730640),l=b(l,u,d,p,a[m+13],4,681279174),p=b(p,l,u,d,a[m+0],11,-358537222),d=b(d,p,l,u,a[m+3],16,-722521979),u=b(u,d,p,l,a[m+6],23,76029189),l=b(l,u,d,p,a[m+9],4,-640364487),p=b(p,l,u,d,a[m+12],11,-421815835),d=b(d,p,l,u,a[m+15],16,530742520),u=b(u,d,p,l,a[m+2],23,-995338651),l=v(l,u,d,p,a[m+0],6,-198630844),p=v(p,l,u,d,a[m+7],10,1126891415),d=v(d,p,l,u,a[m+14],15,-1416354905),u=v(u,d,p,l,a[m+5],21,-57434055),l=v(l,u,d,p,a[m+12],6,1700485571),p=v(p,l,u,d,a[m+3],10,-1894986606),d=v(d,p,l,u,a[m+10],15,-1051523),u=v(u,d,p,l,a[m+1],21,-2054922799),l=v(l,u,d,p,a[m+8],6,1873313359),p=v(p,l,u,d,a[m+15],10,-30611744),d=v(d,p,l,u,a[m+6],15,-1560198380),u=v(u,d,p,l,a[m+13],21,1309151649),l=v(l,u,d,p,a[m+4],6,-145523070),p=v(p,l,u,d,a[m+11],10,-1120210379),d=v(d,p,l,u,a[m+2],15,718787259),u=v(u,d,p,l,a[m+9],21,-343485551),l=l+g>>>0,u=u+_>>>0,d=d+y>>>0,p=p+w>>>0}return e.endian([l,u,d,p])};i._ff=function(t,e,n,r,s,o,i){var a=t+(e&n|~e&r)+(s>>>0)+i;return(a<<o|a>>>32-o)+e},i._gg=function(t,e,n,r,s,o,i){var a=t+(e&r|n&~r)+(s>>>0)+i;return(a<<o|a>>>32-o)+e},i._hh=function(t,e,n,r,s,o,i){var a=t+(e^n^r)+(s>>>0)+i;return(a<<o|a>>>32-o)+e},i._ii=function(t,e,n,r,s,o,i){var a=t+(n^(e|~r))+(s>>>0)+i;return(a<<o|a>>>32-o)+e},i._blocksize=16,i._digestsize=16,t.exports=function(t,n){if(void 0===t||null===t)throw new Error("Illegal argument "+t);var r=e.wordsToBytes(i(t,n));return n&&n.asBytes?r:n&&n.asString?o.bytesToString(r):e.bytesToHex(r)}})()},"6da9":function(t,e,n){"use strict";var r=n("9ab4"),s=n("1157"),o=n.n(s),i=(n("8665"),n("1b40")),a=n("2b0e");window.$=window.jQuery=o.a;let c=class extends a["a"]{};c=Object(r["a"])([i["a"]],c),e["a"]=c},"886e":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui container",attrs:{id:"contest_table"}},[2===t.mode?n("ContestNotStart"):t._e(),1===t.mode?n("LoginForm"):t._e(),3===t.mode?n("contest-mode"):t._e(),4===t.mode?n("LimitHostname",{attrs:{content:t.limit_content}}):t._e(),0===t.mode?n("div",{staticClass:"padding"},[n("h2",{staticClass:"ui dividing header"},[t._v(" "+t._s(t.$t("contest problem set"))+" "+t._s(t.cid)+" -- "+t._s(t.title)+" ")]),n("div",{staticClass:"ui grid"},[t._m(0),n("div",{staticClass:"row"},[n("div",{staticClass:"eleven wide column"},[n("table",{staticClass:"ui basic unstackable table",attrs:{id:"problemset",width:"95%"}},[n("thead",[n("tr",{staticClass:"toprow"},[n("th",{staticStyle:{"text-align":"center"},attrs:{width:"18%"}},[n("a",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.orderBy(0)}}},[0===t.type?n("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):n("i",{staticClass:"checkmark important icon",staticStyle:{opacity:"0"}}),t._v(" "+t._s(t.$t("id"))+" ")])]),n("th",{attrs:{width:"44%"}},[n("a",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.orderBy(1)}}},[1===t.type?n("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):n("i",{staticClass:"checkmark important icon",staticStyle:{opacity:"0"}}),t._v(" "+t._s(t.$t("title")))])]),t.now.isAfter(t.end_time)?n("th",{attrs:{width:"10%"}}):t._e(),n("th",{staticStyle:{"text-align":"center"},attrs:{width:"16%"}},[n("a",{staticStyle:{cursor:"pointer"}},[n("span",{on:{click:function(e){return t.orderBy(2)}}},[2===t.type?n("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):t._e(),t._v(" "+t._s(t.$t("accept")))])]),t._v("/"),n("a",{staticStyle:{cursor:"pointer"}},[n("span",{on:{click:function(e){return t.orderBy(3)}}},[3===t.type?n("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):t._e(),t._v(t._s(t.$t("submit")))])])]),n("th",{staticStyle:{"text-align":"center"},attrs:{width:"12%"}},[n("a",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.orderBy(4)}}},[4===t.type?n("i",{class:"sort numeric icon "+(t.order>0?"up":"down")}):t._e(),t._v(" "+t._s(t.$t("accept percentage"))+" ")])])])]),n("transition-group",{attrs:{mode:"out-in",name:"list-complete",tag:"tbody"}},t._l(t.problem_table,(function(e,r){return n("tr",{key:e.pnum,class:(1===e.ac?"positive":-1===e.ac?"negative":"")+" list-complete-item",attrs:{id:"popup"+r},on:{mouseenter:function(n){return t.triggerPopup(r,e.pid)}}},[n("td",{staticClass:"center aligned"},[t._v(t._s(e.oj_name?e.oj_name:e.pid?"LOCAL ":"")+t._s(e.pid)),e.pid?n("br"):t._e(),t._v("Problem "+t._s(e.pnum+1001)+" ")]),n("td",[1===e.ac?n("i",{staticClass:"checkmark important icon"}):-1===e.ac?n("i",{staticClass:"remove important icon"}):n("i",{staticClass:"checkmark important icon",staticStyle:{opacity:"0"}}),t.dayjs().isBefore(t.end_time)&&t.dayjs().isAfter(t.start_time)?n("router-link",{attrs:{to:"/contest/problem/"+t.cid+"/"+e.pnum},domProps:{innerHTML:t._s(t.contest(e.title,e.pnum))}}):n("router-link",{attrs:{to:"/problem/submit/"+e.pid},domProps:{innerHTML:t._s(t.contest(e.title,e.pnum))}}),t.admin&&t.getLabel(e.pid).length>0?n("br"):t._e(),t.admin?n("div",{staticStyle:{"margin-left":"20px"}},t._l(t.getLabel(e.pid),(function(e){return n("router-link",{directives:[{name:"show",rawName:"v-show",value:t.admin,expression:"admin"}],key:e,class:"ui "+t.getLabelColor(e)+" label",staticStyle:{"margin-top":"4px"},attrs:{to:"/problemset?label="+e}},[t._v(" "+t._s(e)+" ")])})),1):t._e()],1),t.now.isAfter(t.end_time)?n("td",[n("router-link",{attrs:{to:"/tutorial/"+e.pid}},[t._v(t._s(t.$t("solution")))])],1):t._e(),n("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.accepted)+"/"+t._s(e.submit))]),n("td",{staticStyle:{"text-align":"center"}},[t._v(t._s((100*e.accepted/Math.max(e.submit,1)).toString().substring(0,4))+" % ")])])})),0)],1)]),n("div",{staticClass:"five wide column"},[n("div",[n("ContestInfo",{attrs:{admin:t.admin,cid:t.cid,description:t.description,end_time:t.end_time,private_contest:t.private_contest,start_time:t.start_time,title:t.title}}),n("br")],1)])])])]):t._e()],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"sixteen wide column"})])}],o=(n("ddb0"),n("9ab4")),i=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"ui negative message"},[n("div",{staticClass:"header"},[n("i",{staticClass:"ban icon"}),t._v(" 竞赛尚未开始 ")]),n("p",[t._v("请等待竞赛开始后刷新 ")])])])}],c=n("2b0e"),l=n("1b40");let u=class extends c["a"]{};u=Object(o["a"])([l["a"]],u);var d=u,p=d,m=n("2877"),h=Object(m["a"])(p,i,a,!1,null,"18109bdc",null),f=h.exports,b=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},v=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",{staticClass:"ui dividing header"},[t._v("私有竞赛/作业")]),n("form",{staticClass:"ui form",attrs:{id:"contest_form",method:"post"}},[n("div",{staticClass:"fields"},[n("div",{staticClass:"six wide field"},[n("label",[t._v("请输入密码")]),n("input",{staticClass:"input-mini",attrs:{id:"contest_pass",name:"password",type:"password"}})])]),n("input",{staticClass:"ui primary button",attrs:{type:"submit"}})])])}],g=n("1157"),_=n.n(g);const y=_.a;let w=class extends c["a"]{mounted(){y("#contest_form").submit(()=>(this.axios.post("/api/contest/password/"+this.$route.params.contest_id,{password:y("#contest_pass").val()}).then(({data:t})=>{this.$parent.mode=0}).catch(({data:t})=>{alert(t.statement)}),!1))}};w=Object(o["a"])([l["a"]],w);var j=w,C=j,O=Object(m["a"])(C,b,v,!1,null,"0e3da4e6",null),x=O.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui raised segment"},[n("div",{staticClass:"ui grid"},[n("div",{staticClass:"row"}),n("div",{staticClass:"row"}),n("div",{staticClass:"row"},[n("div",{staticClass:"sixteen wide column"},[n("contest-problem-progress-bar",{attrs:{"start-time":t.start_time,"end-time":t.end_time}})],1)]),n("div",{staticClass:"row"},[n("p",{staticStyle:{padding:"1em"}},[t._v(t._s(t.description))])])]),n("div",{class:"ui top right attached label "+(t.private_contest?"red":"green")},[t._v(" "+t._s(t.private_contest?t.$t("private"):t.$t("public"))+" ")]),n("div",{class:"ui top left attached "+(t.now.isAfter(t.end_time)?"red":t.now.isBefore(t.start_time)?"grey":"green")+" label"},[t.now.isAfter(t.end_time)?n("span",{staticClass:"red"},[t._v(t._s(t.$t("end")))]):t.now.isBefore(t.start_time)?n("span",{staticClass:"red"},[t._v("Pending")]):n("span",{staticClass:"green"},[t._v(t._s(t.$t("running")))])])])},S=[],M=n("5a0c"),B=n.n(M),T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("progress-bar",{ref:"progress",attrs:{popupEvent:t.trigger,active:!1,size:"standard",color:"green",percentage:t.percentage}})},A=[],E=n("626a");let P=class extends c["a"]{constructor(){super(...arguments),this.start=B()(),this.end=B()(),this.period=1<<30}onStartTimeChanged(t){this.start=B()(t),this.period=Math.abs(this.end.diff(this.start))}onEndTimeChanged(t){this.end=B()(t),this.period=Math.abs(this.end.diff(this.start))}getPopupHtml(){return`<div class="content">\n            ${this.$t("start time")}: ${this.startTime.format("YYYY-MM-DD HH:mm:ss")}\n            <br>\n            ${this.$t("end time")}: ${this.endTime.format("YYYY-MM-DD HH:mm:ss")}\n            </div>`}trigger(t){$(t).popup({hoverable:!0,html:this.getPopupHtml()}).popup("show")}get percentage(){const t=B()(),e=t.diff(this.start);return Math.min(100*Math.max(e,0)/this.period,100)}};Object(o["a"])([Object(l["c"])({default:B()()})],P.prototype,"startTime",void 0),Object(o["a"])([Object(l["c"])({default:B()()})],P.prototype,"endTime",void 0),Object(o["a"])([Object(l["d"])("startTime")],P.prototype,"onStartTimeChanged",null),Object(o["a"])([Object(l["d"])("endTime")],P.prototype,"onEndTimeChanged",null),P=Object(o["a"])([Object(l["a"])({components:{ProgressBar:E["a"]}})],P);var L=P,I=L,N=Object(m["a"])(I,T,A,!1,null,"09eabde6",null),H=N.exports;let z=class extends c["a"]{constructor(){super(...arguments),this.now=B()()}mounted(){setInterval(()=>{this.now=B()()},1e3)}};Object(o["a"])([Object(l["c"])({default:B()()})],z.prototype,"start_time",void 0),Object(o["a"])([Object(l["c"])({default:B()()})],z.prototype,"end_time",void 0),Object(o["a"])([Object(l["c"])({default:""})],z.prototype,"description",void 0),Object(o["a"])([Object(l["c"])({default:""})],z.prototype,"title",void 0),Object(o["a"])([Object(l["c"])({default:!1})],z.prototype,"admin",void 0),Object(o["a"])([Object(l["c"])({default:!1})],z.prototype,"private_contest",void 0),Object(o["a"])([Object(l["c"])({default:0})],z.prototype,"cid",void 0),z=Object(o["a"])([Object(l["a"])({components:{ContestProblemProgressBar:H}})],z);var D=z,U=D,W=Object(m["a"])(U,k,S,!1,null,"458b15dc",null),Y=W.exports,R=n("d3a2"),F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui negative message"},[t._m(0),n("p",[t._v(t._s(t.content))])])},J=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("i",{staticClass:"ban icon"}),t._v("访问限制")])}];let q=class extends c["a"]{};Object(o["a"])([Object(l["c"])({default:""})],q.prototype,"content",void 0),q=Object(o["a"])([l["a"]],q);var K=q,Q=K,Z=Object(m["a"])(Q,F,J,!1,null,"1446e3db",null),G=Z.exports,V=n("2cd4"),X=n("2f62"),tt=n("2ef0"),et=n.n(tt),nt=n("92f1");const rt={},st=_.a;let ot=class extends(Object(l["b"])(V["a"],nt["a"])){constructor(){super(...arguments),this.colorSet=["red","orange","yellow","olive","green","teal","blue","violet","purple","pink","brown","grey"],this.colorMap={},this.cid=0,this.problem_table=[],this.start_time=B()(),this.end_time=B()(),this.description="",this.title="",this.now=B()(),this.problemInfo={},this.current_mode=0,this.order=1,this.type=0,this.contest_mode=!1,this.limit_content="",this.private_contest=!1,this.dayjs=B.a}created(){this.cid=parseInt(this.$route.params.contest_id),this.title=this.$t("loading")}get mode(){return this.current_mode}set mode(t){const e=t!==this.current_mode;this.current_mode=t,e&&this.run(this.run)}async mounted(){const t=this.$route.params.contest_id;document.title=`Contest ${t} -- ${document.title}`,await this.getInfo(),this.run(this.run)}async getInfo(){(this.admin||this.contest_manager)&&await this.axios.get("/api/contest/problem_info/"+this.cid).then(({data:t})=>{if("OK"===t.status){const e=t.data;e.forEach(t=>{this.problemInfo[t.problem_id]=t})}})}getLabelColor(t){return Object.prototype.hasOwnProperty.call(this.colorMap,t)||(this.colorMap[t]=this.colorSet[Math.floor(Math.random()*this.colorSet.length)]),this.colorMap[t]}triggerPopup(t,e){const n=this.problemDetail(e);st("#popup"+t).popup({hoverable:!0,html:n}).popup("show")}problemDetail(t){const e=this.problemInfo[t];if(e){const t=e.accepted,n=e.submit,r=Math.floor(100*t/Math.max(n,1));return`<div class="content">\n本题历史统计<br>提交: ${n} 通过:${t} 通过率:${r}%\n</div>`}return""}hasLabel(t){return this.getLabel(t).length>0}getLabel(t){if(Object.prototype.hasOwnProperty.call(rt,t))return rt[t];const e=this.problemInfo[t];if(e){const n=e.label,r="string"===typeof n?n.split(" ").map(t=>t.trim()).filter(t=>t.length>0):[];return r.sort((t,e)=>"简单"===t||"普通"===t||"中等"===t||"困难"===t?-1:"简单"===e||"普通"===e||"中等"===e||"困难"===e?1:t<e?-1:t===e?0:1),rt[t]=r,r}}run(t){const e=this.$route.params.contest_id,n=this;this.cid=parseInt(e),this.axios.get("/api/contest/problem/"+e).then(e=>{console.log(e);const r=e.data;et.a.forEach(r.data,t=>{t.accepted||(t.accepted=0),t.submit||(t.submit=0)});let s=r.limit,o=r.contest_mode;if(r.admin&&(s=null,o=!1),s&&-1===location.href.indexOf(s))return n.mode=4,void(n.limit_content="根据管理员设置的策略，本次contest请使用"+s+"访问");n.problem_table=r.data,this.problem_table.forEach(async t=>{t.title&&(t.title=await this.renderRawAsync(t.title))});const i=r.info;n.start_time=B()(i.start_time),n.end_time=B()(i.end_time),n.title=i.title,n.contest_mode=o,n.description=i.description,n.private_contest=Boolean(i.private),"function"===typeof t&&t()}).catch(t=>{const e=t.data;console.log(e),"Permission denied"===e.statement?n.mode=1:101===e.error_code?n.mode=2:e.contest_mode&&(n.mode=3)})}detect_source(t){return t.oj_name&&"local"!==t.oj_name.toLowerCase()?t.oj_name.toLowerCase():"new"}contest(t,e){return this.contest_mode?"Problem "+String.fromCharCode("A".charCodeAt(0)+parseInt(e)):t}orderBy(t){const e=this;e.type===t&&(e.order=-e.order);const n=function(t,n){return e.order*(t.pnum-n.pnum)},r=function(t,n){return e.order*(t.title>n.title?1:t.title<n.title?-1:0)},s=function(t,n){return e.order*(t.submit-n.submit)},o=function(t,n){return e.order*(t.accepted-n.accepted)},i=function(t,n){const r=t.accepted/Math.max(t.submit,1),s=n.accepted/Math.max(n.submit,1);return e.order*(r-s)},a=[n,r,o,s,i];e.problem_table.sort(a[t]),e.type=t}};ot=Object(o["a"])([Object(l["a"])({components:{ContestProblemProgressBar:H,ContestNotStart:f,LoginForm:x,ContestInfo:Y,ContestMode:R["a"],LimitHostname:G},computed:{...Object(X["b"])(["admin","contest_manager"])}})],ot);var it=ot,at=it,ct=(n("ab89"),Object(m["a"])(at,r,s,!1,null,"89b61776",null));e["default"]=ct.exports},"92f1":function(t,e,n){"use strict";n("ddb0");var r=n("9ab4"),s=n("2b0e"),o=n("1b40"),i=n("ebb0"),a=n.n(i),c=n("a390"),l=n.n(c),u=n("5dbd");let d=class extends s["a"]{constructor(){super(...arguments),this.originalWorker=new l.a}created(){this.worker_=new a.a(this.originalWorker)}beforeDestroy(){this.originalWorker.terminate()}async renderAsync(t){return this.worker_.postMessage({type:"render",content:t})}async renderPlainAsync(t){return this.worker_.postMessage({type:"renderPlain",content:t})}async renderRawAsync(t){return this.worker_.postMessage({type:"renderRaw",content:t})}};Object(r["a"])([u["f"]],d.prototype,"renderAsync",null),Object(r["a"])([u["f"]],d.prototype,"renderPlainAsync",null),Object(r["a"])([u["f"]],d.prototype,"renderRawAsync",null),d=Object(r["a"])([o["a"]],d),e["a"]=d},"9a63":function(t,e){var n={utf8:{stringToBytes:function(t){return n.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(n.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=n},a390:function(t,e,n){"use strict";t.exports=function(){return new Worker("/586df56d612de256980b.worker.js")}},ab89:function(t,e,n){"use strict";n("bb363")},bb363:function(t,e,n){},bc99:function(t,e,n){"use strict";var r=n("111f"),s=n.n(r);e["default"]=s.a},d3a2:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui negative message"},[n("div",{staticClass:"header"},[n("i",{staticClass:"ban icon"}),t._v(t._s(t.$t("contest mode")))]),n("p",[t._v(t._s(t.$t("context")))])])},s=[],o=n("9ab4"),i=n("1b40"),a=n("2b0e");let c=class extends a["a"]{};c=Object(o["a"])([i["a"]],c);var l=c,u=l,d=n("2877"),p=n("bc99"),m=Object(d["a"])(u,r,s,!1,null,"5816c0f2",null);"function"===typeof p["default"]&&Object(p["default"])(m);e["a"]=m.exports},ebb0:function(t,e,n){"use strict";var r=0;function s(t,e){var n=e.data;if(Array.isArray(n)&&!(n.length<2)){var r=n[0],s=n[1],o=n[2],i=t._callbacks[r];i&&(delete t._callbacks[r],i(s,o))}}function o(t){var e=this;e._worker=t,e._callbacks={},t.addEventListener("message",(function(t){s(e,t)}))}o.prototype.postMessage=function(t){var e=this,n=r++,o=[n,t];return new Promise((function(t,r){if(e._callbacks[n]=function(e,n){if(e)return r(new Error(e.message));t(n)},"undefined"!==typeof e._worker.controller){var i=new MessageChannel;i.port1.onmessage=function(t){s(e,t)},e._worker.controller.postMessage(o,[i.port2])}else e._worker.postMessage(o)}))},t.exports=o},ee78:function(t,e,n){"use strict";n("0b52")}}]);