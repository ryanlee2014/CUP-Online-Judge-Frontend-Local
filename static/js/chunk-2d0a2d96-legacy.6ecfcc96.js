(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a2d96"],{"0055":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"ui container pusher"},[e("div",{staticClass:"padding"},[e("div",{staticClass:"ui grid"},[e("div",{staticClass:"five wide column"},[e("div",{staticClass:"row"},[e("div",{staticClass:"ui card",staticStyle:{width:"100%"}},[e("div",{staticClass:"image"},[e("v-gravatar",{attrs:{hostname:t.$store.getters.gravatarCDN,email:t.email,size:324}})],1),t._m(0)])]),t.img_src.length>0?e("div",{staticClass:"row"},[e("div",{staticClass:"column"},[e("div",{staticClass:"ui card",staticStyle:{width:"100%"}},[e("div",{staticClass:"image"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.img_src,expression:"img_src"}],attrs:{id:"head"}})]),t._m(1)])])]):t._e()]),e("div",{staticClass:"eleven wide column"},[e("form",{attrs:{method:"post"}},[e("div",{staticClass:"ui top attached block header"},[t._v(t._s(t.$t("update information")))]),e("div",{staticClass:"ui bottom attached segment"},[e("table",{staticStyle:{margin:"auto",width:"100%"}},[e("div",{staticClass:"ui form"},[e("div",{staticClass:"two fields"},[e("div",{staticClass:"field"},[e("label",[t._v(t._s(t.$t("user_id")))]),e("div",{staticClass:"ui disabled input"},[e("input",{attrs:{size:"50",type:"text"},domProps:{value:t.user_id}})])]),e("div",{staticClass:"field"},[e("label",[t._v(t._s(t.$t("nick")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.nick,expression:"nick"}],attrs:{name:"nick",size:"50",type:"text"},domProps:{value:t.nick},on:{input:function(a){a.target.composing||(t.nick=a.target.value)}}})])]),e("div",{staticClass:"three fields"},[e("div",{staticClass:"field"},[e("label",[t._v("Old Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{name:"opassword",placeholder:"请输入密码后更改其他信息",size:"20",type:"password"},domProps:{value:t.password},on:{input:function(a){a.target.composing||(t.password=a.target.value)}}})]),e("div",{staticClass:"field"},[e("label",[t._v("New Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newpassword,expression:"newpassword"}],attrs:{name:"npassword",size:"20",type:"password"},domProps:{value:t.newpassword},on:{input:function(a){a.target.composing||(t.newpassword=a.target.value)}}})]),e("div",{staticClass:"field"},[e("label",[t._v("Repeat New Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.repeatpassword,expression:"repeatpassword"}],attrs:{name:"rptpassword",size:"20",type:"password"},domProps:{value:t.repeatpassword},on:{input:function(a){a.target.composing||(t.repeatpassword=a.target.value)}}})])]),e("div",{staticClass:"two fields"},[e("div",{staticClass:"field"},[e("label",[t._v(t._s(t.$t("school")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.school,expression:"school"}],attrs:{name:"school",size:"30",type:"text"},domProps:{value:t.school},on:{input:function(a){a.target.composing||(t.school=a.target.value)}}})]),e("div",{staticClass:"field"},[e("label",[t._v(t._s(t.$t("email")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{name:"email",size:"30",type:"text"},domProps:{value:t.email},on:{input:function(a){a.target.composing||(t.email=a.target.value)}}})])]),e("div",{staticClass:"two fields"},[e("div",{staticClass:"field"},[e("label",[t._v("找回密码问题")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmquestion,expression:"confirmquestion"}],attrs:{name:"confirmquestion",size:"30",type:"text"},domProps:{value:t.confirmquestion},on:{input:function(a){a.target.composing||(t.confirmquestion=a.target.value)}}})]),e("div",{staticClass:"field"},[e("label",[t._v("找回密码答案")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmanswer,expression:"confirmanswer"}],attrs:{name:"confirmanswer",size:"30",type:"text"},domProps:{value:t.confirmanswer},on:{input:function(a){a.target.composing||(t.confirmanswer=a.target.value)}}})])]),e("div",{staticClass:"two fields"},[e("div",{staticClass:"field"},[e("label",[t._v(t._s(t.$t("blog")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.blog,expression:"blog"}],attrs:{name:"blog",type:"text"},domProps:{value:t.blog},on:{input:function(a){a.target.composing||(t.blog=a.target.value)}}})]),e("div",{staticClass:"field"},[e("label",[t._v("GitHub")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.github,expression:"github"}],attrs:{name:"github",type:"text"},domProps:{value:t.github},on:{input:function(a){a.target.composing||(t.github=a.target.value)}}})])]),e("div",{staticClass:"field"},[t._m(2),e("input",{attrs:{name:"",type:"text",disabled:""},domProps:{value:t.email}})]),e("div",{staticClass:"field"},[e("label",[t._v(t._s(t.$t("biography"))+"(支持markdown语法)")]),e("mavon-editor",{attrs:{markInstance:t.markdownIt},model:{value:t.biography,callback:function(a){t.biography=a},expression:"biography"}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.biography,expression:"biography"}],attrs:{name:"biography",type:"text"},domProps:{value:t.biography},on:{input:function(a){a.target.composing||(t.biography=a.target.value)}}})],1),e("div",{staticClass:"fields"},[e("div",{staticClass:"field"},[e("label"),e("input",{staticClass:"ui primary button",attrs:{name:"submit",type:"submit",value:"Submit"},on:{click:function(a){return a.preventDefault(),t.updateInformation(a)}}})]),e("div",{staticClass:"field"},[e("label"),e("input",{staticClass:"ui secondary button",attrs:{name:"reset",type:"reset",value:"Reset"},on:{click:function(a){return a.preventDefault(),t.reset(a)}}})])])])])])])])])]),e("br"),e("br")])},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content"},[e("div",{staticClass:"header"},[t._v(" Gravatar头像 ")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content"},[e("div",{staticClass:"header"},[t._v(" 原头像 ")]),e("div",{staticClass:"meta"},[t._v(" 已停用，请根据提示迁移到Gravatar头像 ")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("label",[t._v("头像(请使用邮箱注册 "),e("a",{attrs:{href:"https://zh-cn.wordpress.com/",target:"_blank"}},[t._v("WordPress.com")]),t._v("，登录 "),e("a",{attrs:{href:"https://cn.gravatar.com/",target:"_blank"}},[t._v("Gravatar")]),t._v(" 并上传头像。头像与你的邮箱绑定。该邮箱在右上“邮箱”输入框修改。)")])}],r=(e("498a"),e("5530")),o=e("d4ec"),n=e("bee2"),l=e("262e"),c=e("2caf"),d=e("9ab4"),u=e("2f62"),v=e("3657"),m=e("2cd4"),p=e("ec1c"),g=e("1b40"),f=function(t){Object(l["a"])(e,t);var a=Object(c["a"])(e);function e(){var t;return Object(o["a"])(this,e),t=a.apply(this,arguments),t.blog="",t.github="",t.biography="",t.confirmquestion="",t.confirmanswer="",t.password="",t.newpassword="",t.repeatpassword="",t.dirty=!1,t.email="",t.school="",t.nick="",t.avatar=!1,t.avatarUrl="",t.markdownIt=p["a"],t}return Object(n["a"])(e,[{key:"created",value:function(){this.nick=this.$store.getters.nick,this.avatar=this.$store.getters.avatar,this.avatarUrl=v["a"].stringify(this.$store.getters.avatarUrl||"")}},{key:"mounted",value:function(){var t=this;this.axios.get("/api/user/".concat(this.user_id)).then((function(a){var e=a.data;Object.assign(t,e.data.information)})),this.axios.get("/api/reset/password").then((function(a){var e=a.data;"OK"===e.status&&(t.confirmquestion=e.data)}))}},{key:"updateInformation",value:function(){var t=this;this.axios.post("/api/user/update/profile",this.$data).then((function(a){a.data;t.$store.dispatch("NavStatus"),alert("更改成功")})).catch((function(t){var a=t.data;alert("服务器遇到错误: \n"+a.statement)}))}},{key:"reset",value:function(){location.reload()}},{key:"refreshImage",value:function(){var t=this;this.dirty&&(this.dirty=!1,this.$nextTick((function(){setTimeout((function(){t.$Lazyload.lazyLoadHandler(),t.$forceUpdate()}),0)})))}},{key:"onAvatarUrlChanged",value:function(){this.refreshImage()}},{key:"onImageSrcChanged",value:function(){this.refreshImage()}},{key:"img_src",get:function(){var t=v["a"].stringify(this.avatarUrl);return!this.avatar||t.length>0?t.length>0?t:"":"/avatar/".concat(this.user_id,".jpg")},set:function(t){t!==this.avatarUrl&&(this.dirty=!0,this.avatarUrl=t.trim())}}]),e}(Object(g["b"])(m["a"]));Object(d["a"])([Object(g["d"])("avatarUrl")],f.prototype,"onAvatarUrlChanged",null),Object(d["a"])([Object(g["d"])("img_src")],f.prototype,"onImageSrcChanged",null),f=Object(d["a"])([Object(g["a"])({computed:Object(r["a"])({},Object(u["b"])(["user_id"]))})],f);var h=f,b=h,w=e("2877"),_=Object(w["a"])(b,s,i,!1,null,"5561e9e1",null);a["default"]=_.exports}}]);