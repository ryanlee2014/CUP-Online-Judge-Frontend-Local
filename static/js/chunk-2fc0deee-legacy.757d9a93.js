(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2fc0deee"],{3185:function(t,e,s){"use strict";var a=s("d4ec"),i=s("262e"),r=s("2caf"),o=s("9ab4"),n=s("2b0e"),l=s("60a3"),d=function(t){Object(i["a"])(s,t);var e=Object(r["a"])(s);function s(){var t;return Object(a["a"])(this,s),t=e.apply(this,arguments),t.captchaHash=Math.random(),t}return s}(n["a"]);d=Object(o["c"])([l["a"]],d),e["a"]=d},"87ea":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ui container padding"},[1===t.status?s("init-config",{on:{configUpdated:t.updateStatus}}):t._e(),2===t.status?s("init-admin"):t._e()],1)},i=[],r=s("d4ec"),o=s("bee2"),n=s("262e"),l=s("2caf"),d=s("9ab4"),c=s("60a3"),u=s("2cd4"),p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"html ui top attached segment"},[s("div",{staticClass:"ui large form"},[s("div",{staticClass:"ui form"},[s("div",{staticClass:"two fields"},[s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("database hostname")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.mysql.host,expression:"mysql.host"}],attrs:{name:"hostname",type:"text"},domProps:{value:t.mysql.host},on:{input:function(e){e.target.composing||t.$set(t.mysql,"host",e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("database port")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.mysql.port,expression:"mysql.port"}],attrs:{name:"port",type:"text"},domProps:{value:t.mysql.port},on:{input:function(e){e.target.composing||t.$set(t.mysql,"port",e.target.value)}}})])]),s("div",{staticClass:"two fields"},[s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("database username")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.mysql.user,expression:"mysql.user"}],attrs:{name:"user",type:"text"},domProps:{value:t.mysql.user},on:{input:function(e){e.target.composing||t.$set(t.mysql,"user",e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("database password")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.mysql.password,expression:"mysql.password"}],attrs:{name:"password",type:"text"},domProps:{value:t.mysql.password},on:{input:function(e){e.target.composing||t.$set(t.mysql,"password",e.target.value)}}})])]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("database")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.mysql.database,expression:"mysql.database"}],attrs:{name:"database",type:"text"},domProps:{value:t.mysql.database},on:{input:function(e){e.target.composing||t.$set(t.mysql,"database",e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("salt")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.salt,expression:"salt"}],attrs:{name:"salt",type:"text"},domProps:{value:t.salt},on:{input:function(e){e.target.composing||(t.salt=e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("session secret")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.session_secret,expression:"session_secret"}],attrs:{name:"session_secret",type:"text"},domProps:{value:t.session_secret},on:{input:function(e){e.target.composing||(t.session_secret=e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("judger address")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.judger.address,expression:"judger.address"}],attrs:{name:"judger_address",type:"text"},domProps:{value:t.judger.address},on:{input:function(e){e.target.composing||t.$set(t.judger,"address",e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("judger data directory")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.judger.oj_home,expression:"judger.oj_home"}],attrs:{name:"judger_data_directory",type:"text"},domProps:{value:t.judger.oj_home},on:{input:function(e){e.target.composing||t.$set(t.judger,"oj_home",e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("compile arguments")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.etc.compile_arguments,expression:"etc.compile_arguments"}],attrs:{name:"compile_arguments",type:"text"},domProps:{value:t.etc.compile_arguments},on:{input:function(e){e.target.composing||t.$set(t.etc,"compile_arguments",e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("problem upload directory")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.problem_upload_dest.dir,expression:"problem_upload_dest.dir"}],attrs:{name:"problem_upload_directory",type:"text"},domProps:{value:t.problem_upload_dest.dir},on:{input:function(e){e.target.composing||t.$set(t.problem_upload_dest,"dir",e.target.value)}}})]),s("div",{staticClass:"ui buttons"},[s("button",{staticClass:"ui button",attrs:{type:"reset",name:"reset"},on:{click:function(e){return e.preventDefault(),t.resetConfig(e)}}},[t._v(t._s(t.$t("reset")))]),s("div",{staticClass:"or"}),s("button",{staticClass:"ui positive button",attrs:{type:"submit",id:"submit"},on:{click:function(e){return e.preventDefault(),t.updateConfig(e)}}},[t._v(t._s(t.$t("submit")))])])]),s("div",{staticClass:"ui error message"}),s("br"),s("br")])])},m=[],v=s("2b0e"),f={},b={},g=function(t){Object(n["a"])(s,t);var e=Object(l["a"])(s);function s(){var t;return Object(r["a"])(this,s),t=e.apply(this,arguments),t.mysql={host:"",user:"",password:"",port:"",database:""},t.salt="",t.session_secret="",t.judger={address:"",oj_home:""},t.etc={compile_arguments:""},t.problem_upload_dest={dir:""},t}return Object(o["a"])(s,[{key:"mounted",value:function(){var t=this;this.axios.get("/api/init/firstrun/").then((function(e){var s=e.data;Object.assign(t,s.data),f=s.data,b=JSON.parse(JSON.stringify(b))}))}},{key:"updateConfig",value:function(){var t=this;Object.assign(f,this.$data),this.axios.post("/api/init/firstrun/config",{content:f}).then((function(e){e.data;t.$emit("configUpdated")}))}},{key:"resetConfig",value:function(){Object.assign(this,b)}}]),s}(v["a"]);g=Object(d["c"])([c["a"]],g);var _=g,h=_,w=s("2877"),y=Object(w["a"])(h,p,m,!1,null,"d0aaca7c",null),C=y.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"html ui top attached segment"},[s("div",{staticClass:"ui large form"},[s("div",{staticClass:"ui form"},[s("div",{staticClass:"two fields"},[s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("user_id")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userId,expression:"userId"}],attrs:{type:"text",placeholder:"",name:"user_id",id:"user_id"},domProps:{value:t.userId},on:{input:function(e){e.target.composing||(t.userId=e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("nick")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.nick,expression:"nick"}],attrs:{type:"text",name:"nick",placeholder:""},domProps:{value:t.nick},on:{input:function(e){e.target.composing||(t.nick=e.target.value)}}})])]),s("div",{staticClass:"two fields"},[s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("password")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{name:"password",id:"password",type:"password",placeholder:"必填"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("repeat password")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.repeatPassword,expression:"repeatPassword"}],attrs:{name:"rptpassword",id:"rptpassword",type:"password",placeholder:"必填"},domProps:{value:t.repeatPassword},on:{input:function(e){e.target.composing||(t.repeatPassword=e.target.value)}}})])]),s("div",{staticClass:"two fields"},[s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("retrieve password question")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmQuestion,expression:"confirmQuestion"}],attrs:{name:"confirmquestion",id:"confirmquestion",placeholder:"必填"},domProps:{value:t.confirmQuestion},on:{input:function(e){e.target.composing||(t.confirmQuestion=e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("retrieve password answer")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmAnswer,expression:"confirmAnswer"}],attrs:{name:"confirmanswer",id:"confirmanswer",placeholder:"必填"},domProps:{value:t.confirmAnswer},on:{input:function(e){e.target.composing||(t.confirmAnswer=e.target.value)}}})])]),s("div",{staticClass:"two fields"},[s("div",{staticClass:"field"},[s("label",[t._v(t._s(t.$t("captcha")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.captcha,expression:"captcha"}],attrs:{name:"vcode",size:"4",type:"text"},domProps:{value:t.captcha},on:{input:function(e){e.target.composing||(t.captcha=e.target.value)}}})]),s("div",{staticClass:"field"},[s("label",{staticStyle:{opacity:"0"}},[t._v("Captcha image")]),s("img",{staticClass:"captcha",attrs:{alt:"click to change",src:"/api/captcha?from=init&random="+t.captchaHash,onclick:"this.src='/api/captcha?from=init&random='+Math.random()",width:"20%"}})])]),s("div",{staticClass:"ui buttons"},[s("button",{staticClass:"ui button",attrs:{type:"reset",name:"reset"},on:{click:function(e){return e.preventDefault(),t.reset(e)}}},[t._v(t._s(t.$t("reset")))]),s("div",{staticClass:"or"}),s("button",{staticClass:"ui positive button",attrs:{type:"submit",id:"submit"},on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[t._v(t._s(t.$t("submit")))])])]),s("div",{staticClass:"ui error message"}),s("br"),s("br")])])},x=[],$=s("5dbd"),O=s("3185"),k={confirmQuestion:"",inviteCode:"",nick:"",password:"",userId:"",captcha:"",repeatPassword:"",confirmAnswer:""},P=function(t){Object(n["a"])(s,t);var e=Object(l["a"])(s);function s(){var t;return Object(r["a"])(this,s),t=e.apply(this,arguments),t.captcha="",t.repeatPassword="",t.confirmAnswer="",t.confirmQuestion="",t.inviteCode="",t.nick="",t.password="",t.userId="",t}return Object(o["a"])(s,[{key:"mounted",value:function(){}},{key:"validatePassword",value:function(){if(this.password!==this.repeatPassword)throw new Error("两次输入的密码不一致")}},{key:"submit",value:function(){var t=this;this.validatePassword();var e={confirmAnswer:this.confirmAnswer,confirmQuestion:this.confirmQuestion,inviteCode:this.inviteCode,nick:this.nick,password:this.password,userId:this.userId,captcha:this.captcha};this.axios.post("/api/init/firstrun/admin",e).then((function(e){var s=e.data;"OK"===s.status&&(alert("注册成功"),t.$store.dispatch("NavStatus"),t.$router.push({path:"/login"}))})).catch((function(t){alert(t.data.statement)}))}},{key:"reset",value:function(){Object.assign(this,k)}}]),s}(Object(c["b"])(O["a"]));Object(d["c"])([$["d"]],P.prototype,"submit",null),P=Object(d["c"])([c["a"]],P);var q=P,N=q,I=Object(w["a"])(N,j,x,!1,null,"3549ce46",null),A=I.exports,Q=function(t){Object(n["a"])(s,t);var e=Object(l["a"])(s);function s(){var t;return Object(r["a"])(this,s),t=e.apply(this,arguments),t.status=1,t}return Object(o["a"])(s,[{key:"updateStatus",value:function(){this.status=2}}]),s}(Object(c["b"])(u["a"]));Q=Object(d["c"])([Object(c["a"])({components:{InitAdmin:A,InitConfig:C}})],Q);var S=Q,D=S,E=Object(w["a"])(D,a,i,!1,null,"04bfff6a",null);e["default"]=E.exports}}]);