(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bf4ed3b"],{"986d":function(t,e,i){"use strict";function a(t){return t.filter((function(t,e,i){return i.indexOf(t)===e}))}i.d(e,"a",(function(){return a}))},ba15:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui container padding"},[i("div",{staticClass:"ui grid"},[i("div",{staticClass:"row"},[i("h2",{staticClass:"ui header"},[t._v(" "+t._s(t.$t("title"))+" ")])]),i("div",{staticClass:"two column row"},[i("div",{staticClass:"column"},[i("div",{staticClass:"ui input",staticStyle:{width:"100%"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])]),i("div",{staticClass:"column",staticStyle:{"z-index":"1700"}},[i("select",{staticClass:"ui search dropdown label selection",attrs:{multiple:""},on:{change:function(e){t.label=t.select(".label.selection.ui.dropdown").dropdown("get value")}}},t._l(t.all_label,(function(e){return i("option",{key:e,domProps:{value:e,textContent:t._s(e)}})})),0)])]),i("div",{staticClass:"three column row"},[i("div",{staticClass:"column"},[i("div",{staticClass:"ui labeled input"},[i("div",{staticClass:"ui label"},[t._v(" "+t._s(t.$t("time limit"))+" ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.time,expression:"time"}],attrs:{type:"text"},domProps:{value:t.time},on:{input:function(e){e.target.composing||(t.time=e.target.value)}}})])]),i("div",{staticClass:"column"},[i("div",{staticClass:"ui labeled input"},[i("div",{staticClass:"ui label"},[t._v(" "+t._s(t.$t("memory"))+" ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.memory,expression:"memory"}],attrs:{type:"text"},domProps:{value:t.memory},on:{input:function(e){e.target.composing||(t.memory=e.target.value)}}})])]),i("div",{staticClass:"column",staticStyle:{margin:"auto"}},[i("div",{staticClass:"ui toggle checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.spj,expression:"spj"}],attrs:{type:"checkbox"},domProps:{checked:t.spj,checked:Array.isArray(t.spj)?t._i(t.spj,null)>-1:t.spj},on:{change:function(e){var i=t.spj,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n=null,l=t._i(i,n);a.checked?l<0&&(t.spj=i.concat([n])):l>-1&&(t.spj=i.slice(0,l).concat(i.slice(l+1)))}else t.spj=s}}}),i("label",[t._v("Special Judge")])])])]),i("div",{staticClass:"row"},[i("h2",{staticClass:"ui header"},[t._v(" "+t._s(t.$t("description"))+" ")])]),i("div",{staticClass:"row"},[i("mavon-editor",{ref:"description",attrs:{markInstance:t.descriptionInstance},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),i("br"),i("div",{staticClass:"row"},[i("h2",{staticClass:"ui header"},[t._v(" "+t._s(t.$t("input"))+" ")])]),i("div",{staticClass:"row"},[i("mavon-editor",{ref:"input",attrs:{markInstance:t.inputInstance},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1),i("br"),i("div",{staticClass:"row"},[i("h2",{staticClass:"ui header"},[t._v(" "+t._s(t.$t("output"))+" ")])]),i("div",{staticClass:"row"},[i("mavon-editor",{ref:"output",attrs:{markInstance:t.outputInstance},model:{value:t.output,callback:function(e){t.output=e},expression:"output"}})],1),i("br"),i("div",{staticClass:"row"},[i("h2",{staticClass:"ui header"},[t._v(" "+t._s(t.$t("sampleinput"))+" ")])]),i("div",{staticClass:"row"},[i("div",{staticClass:"ui form",staticStyle:{"min-width":"85%"}},[i("div",{staticClass:"field"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.sampleinput,expression:"sampleinput"}],domProps:{value:t.sampleinput},on:{input:function(e){e.target.composing||(t.sampleinput=e.target.value)}}})])])]),i("br"),i("div",{staticClass:"row"},[i("h2",{staticClass:"ui header"},[t._v(" "+t._s(t.$t("sampleoutput"))+" ")])]),i("div",{staticClass:"row"},[i("div",{staticClass:"ui form",staticStyle:{"min-width":"85%"}},[i("div",{staticClass:"field"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.sampleoutput,expression:"sampleoutput"}],domProps:{value:t.sampleoutput},on:{input:function(e){e.target.composing||(t.sampleoutput=e.target.value)}}})])])]),i("div",{staticClass:"row"},[i("h2",{staticClass:"ui header"},[t._v(t._s(t.$t("problem file")))])]),t._m(0),i("div",{staticClass:"row"},[i("h2",{staticClass:"ui header"},[t._v(" "+t._s(t.$t("prepend code"))+" ")])]),i("div",{staticClass:"row"},[i("div",{staticClass:"four wide column"},[i("div",{staticClass:"ui attached vertical fluid pointing menu",staticStyle:{height:"370px","overflow-y":"scroll","overflow-x":"hidden"}},[i("a",{class:0===t.prependSelected?"active item":"item",on:{click:function(e){t.prependSelected=0}}},[t._v("C "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[t._v("GNU C99/C11 LLVM Clang ")])]),i("a",{class:1===t.prependSelected?"active item":"item",on:{click:function(e){t.prependSelected=1}}},[t._v("C++ "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[t._v("GNU C++11/C++89/C++17 LLVM Clang++ ")])]),i("a",{class:2===t.prependSelected?"active item":"item",on:{click:function(e){t.prependSelected=2}}},[t._v("Pascal "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[t._v("fpc Pascal ")])]),i("a",{class:3===t.prependSelected?"active item":"item",on:{click:function(e){t.prependSelected=3}}},[t._v("Java "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[t._v(" openJDK 1.6/1.7/1.8/1.10 ")])]),i("a",{class:16===t.prependSelected?"active item":"item",on:{click:function(e){t.prependSelected=16}}},[t._v("JavaScript "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[t._v(" NodeJS 10.13.0 ")])]),i("a",{class:6===t.prependSelected?"active item":"item",on:{click:function(e){t.prependSelected=6}}},[t._v("Python "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[t._v(" Python 2.7/3.6 PyPy2/3 ")])]),i("a",{class:9===t.prependSelected?"active item":"item",on:{click:function(e){t.prependSelected=9}}},[t._v("C# "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[t._v(" Mono ")])])])]),i("div",{staticClass:"ten wide column"},[i("monaco-editor",{attrs:{selected_language:t.prependSelected},model:{value:t.prepend[t.prependSelected],callback:function(e){t.$set(t.prepend,t.prependSelected,e)},expression:"prepend[prependSelected]"}})],1)]),i("div",{staticClass:"row"},[i("h2",{staticClass:"ui header"},[t._v(" "+t._s(t.$t("append code"))+" ")])]),i("div",{staticClass:"row"},[i("div",{staticClass:"four wide column"},[i("div",{staticClass:"ui attached vertical fluid pointing menu",staticStyle:{height:"370px","overflow-y":"scroll","overflow-x":"hidden"}},[i("a",{class:0===t.appendSelected?"active item":"item",on:{click:function(e){t.appendSelected=0}}},[t._v("C "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[t._v("GNU C99/C11 LLVM Clang ")])]),i("a",{class:1===t.appendSelected?"active item":"item",on:{click:function(e){t.appendSelected=1}}},[t._v("C++ "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[t._v("GNU C++11/C++89/C++17 LLVM Clang++ ")])]),i("a",{class:2===t.appendSelected?"active item":"item",on:{click:function(e){t.appendSelected=2}}},[t._v("Pascal "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[t._v("fpc Pascal ")])]),i("a",{class:3===t.appendSelected?"active item":"item",on:{click:function(e){t.appendSelected=3}}},[t._v("Java "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[t._v(" OpenJDK 1.6/1.7/1.8/1.10 ")])]),i("a",{class:16===t.appendSelected?"active item":"item",on:{click:function(e){t.appendSelected=16}}},[t._v("JavaScript "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[t._v(" NodeJS 10.13.0 ")])]),i("a",{class:6===t.appendSelected?"active item":"item",on:{click:function(e){t.appendSelected=6}}},[t._v("Python "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[t._v(" Python 2.7/3.6 PyPy2/3 ")])]),i("a",{class:9===t.appendSelected?"active item":"item",on:{click:function(e){t.appendSelected=9}}},[t._v("C# "),i("div",{staticClass:"ui right floated",staticStyle:{opacity:"0.4","margin-top":"8px","font-size":"0.7em"}},[t._v(" Mono ")])])])]),i("div",{staticClass:"ten wide column"},[i("monaco-editor",{attrs:{selected_language:t.appendSelected},model:{value:t.append[t.appendSelected],callback:function(e){t.$set(t.append,t.appendSelected,e)},expression:"append[appendSelected]"}})],1)]),"local"===t.from?i("div",{staticClass:"row"},[i("h2",{staticClass:"ui header"},[t._v(" "+t._s(t.$t("hint"))+" ")])]):t._e(),"local"===t.from?i("div",{staticClass:"row"},[i("mavon-editor",{ref:"hint",attrs:{markInstance:t.hintInstance,test:"1"},model:{value:t.hint,callback:function(e){t.hint=e},expression:"hint"}})],1):t._e(),i("a",{staticClass:"ui button",on:{click:t.submit}},[t._v(t._s(t.$t("submit")))])])])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("p",[t._v("请在题目添加完成后到题目编辑界面添加数据")])])}],n=(i("ddb0"),i("9ab4")),l=i("2cd4"),c=i("60a3"),o=i("ec1c"),p=i("3865"),d=i("986d"),r=i("1157"),u=i.n(r),m=i("fe4d");const v=u.a;let h=class extends(Object(c["b"])(l["a"],m["a"])){constructor(){super(...arguments),this.title="",this.description="",this.time="",this.memory="",this.input="",this.output="",this.spj=!1,this.sampleinput="",this.sampleoutput="",this.descriptionInstance=o["a"].newInstance(),this.inputInstance=o["a"].newInstance(),this.outputInstance=o["a"].newInstance(),this.hintInstance=o["a"].newInstance(),this.hint="",this.source="local",this.from="local",this.label=[],this.all_label=[],this.prepend={},this.prependSelected=0,this.append={},this.appendSelected=0,this.files=[],this.id=null,this.select=v}mounted(){document.title=`${this.$t("addproblem")} -- ${document.title}`,this.initData()}makeHref(t){return`/api/admin/problem/download/data/${this.id}/${t}`}PrependAppendLanguage(t,e,i){const a=this[t][e];"undefined"!==typeof a&&i.forEach(e=>{this[t][e]=a})}generateProblemId(){return this.axios.post("/api/problem/add").then(({data:t})=>t.data)}async submit(){const t="local";this.PrependAppendLanguage("prepend",0,[21,13,28]),this.PrependAppendLanguage("prepend",1,[19,20,14,29]),this.PrependAppendLanguage("prepend",3,[23,24,27]),this.PrependAppendLanguage("append",3,[23,24,27]),this.PrependAppendLanguage("append",0,[21,13,28]),this.PrependAppendLanguage("append",1,[19,20,14,29]);const e=await this.generateProblemId(),i={imageData:{}},a={payload:[],problemId:e};Object.keys(this.prepend).forEach(t=>{this.prepend[t].trim().length>0&&a.payload.push({language:parseInt(t),code:this.prepend[t]})});const s={payload:[],problemId:e};Object.keys(this.append).forEach(t=>{this.append[t].trim().length>0&&s.payload.push({language:parseInt(t),code:this.append[t]})});for(const d of this.$children){if("undefined"===typeof d.markdownIt)continue;const t=d.$vnode.data.model;i[t.expression]=t.value,i.imageData[t.expression]=d.markdownIt.__image||{}}i.time=this.time,i.memory=this.memory,i.title=this.title,i.sampleinput=this.sampleinput,i.sampleoutput=this.sampleoutput,i.spj=Number(this.spj),i.hint=this.hint;const n=this.label;i.label=Object(d["a"])(n).join(" ");const l=[],c=this.axios.post(`/api/problem/${this.source}/${e}`,{json:i}).then(({data:i})=>{"OK"===i.status&&(this.axios.get(`/api/problem/${t}?id=${e}`),alert("提交成功"))}),o=this.axios.post("/api/problem/prefile/prepend",a),p=this.axios.post("/api/problem/prefile/append",s);l.push(c,o,p),Promise.all(l).then(()=>{this.routerBack()})}initData(){this.axios.get("/api/problem/local/?label=true").then(({data:t})=>{const e=v(".label.selection.ui.dropdown");this.all_label=t.data;const i=this.label;e.dropdown({allowAdditions:!0}).on("click",()=>{this.label=e.dropdown("get value")});for(let a=0;a<i.length;++a)e.dropdown("set selected",i[a])})}};h=Object(n["c"])([Object(c["a"])({components:{monacoEditor:p["a"]}})],h);var f=h,g=f,C=i("2877"),_=Object(C["a"])(g,a,s,!1,null,"352f21bc",null);e["default"]=_.exports},fe4d:function(t,e,i){"use strict";var a=i("9ab4"),s=i("2b0e"),n=i("60a3");let l=class extends s["a"]{routerBack(t){window.history.length<=1?this.$router.push(t||"/"):this.$router.back()}};l=Object(a["c"])([n["a"]],l),e["a"]=l}}]);